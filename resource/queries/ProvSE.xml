<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>CopyCS</comment>

<entry key="GetSideEffect">
SELECT prov.tid
FROM
(SELECT *
FROM ${1}) AS prov
WHERE NOT EXISTS (SELECT subprov.tid
FROM (SELECT PROVENANCE * FROM ${1}) AS subprov
WHERE prov.tid = subprov.tid AND ${2})
</entry>

<entry key="GetSideEffectNotExists">
SELECT prov.tid
FROM
(SELECT *
FROM ${1}) AS prov
WHERE NOT EXISTS (SELECT subprov.tid
FROM (SELECT PROVENANCE * FROM ${1}) AS subprov
WHERE prov.tid = subprov.tid AND ${2})
</entry>

<entry key="GetSideEffectAlternative">
SELECT prov.tid, ${1}
FROM
(SELECT PROVENANCE * 
FROM ${2}) AS prov
WHERE EXISTS (SELECT * FROM (SELECT PROVENANCE * FROM ${2}) AS subprov 
WHERE prov.tid = subprov.tid AND ${3}) ORDER  BY tid
</entry>

<entry key="GetSideEffectUnnested">
SELECT prov.tid
FROM
${2} AS prov
LEFT JOIN
(SELECT tid, 1 AS test FROM (SELECT PROVENANCE * FROM ${2}) AS subprov WHERE ${3}) AS sub 
ON (prov.tid = sub.tid)
WHERE test IS NULL 
</entry>

<entry key="GetSideEffectUsingAgg">
SELECT tid
FROM 
(SELECT tid, ${2} AS hasSub
FROM (SELECT PROVENANCE * FROM ${1}) p) AS sideeff
GROUP BY tid
HAVING bool_and(hasSub) = true;
</entry>

<entry key="GetSideEffectUsingAggWithMap">
SELECT realside.tid, trans_prov
FROM
(SELECT tid FROM 
(SELECT tid, ${2} AS hasSub
FROM (SELECT PROVENANCE * FROM ${1}) p) AS sideeff
GROUP BY sideeff.tid
HAVING bool_and(hasSub) = true) AS realside,
(SELECT MAPPROV * FROM ${1}) AS mprov
WHERE realside.tid = mprov.tid
</entry>

<entry key="GetProvQueryResultAttrs">
SELECT xpath('/Query/Select/Attr/attribute::name', 
query_sql_to_simple_xml('SELECT PROVENANCE * FROM ${1}'))::text AS attrs;
</entry>

<entry key="GetMapsForBaseRelAccess">
SELECT xslt_process(
query_sql_to_simple_xml('SELECT PROVENANCE * FROM ${1}'::text)::text,
'&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;
&lt;xsl:output method=&quot;text&quot;/&gt;
&lt;xsl:template match=&quot;/&quot;&gt;
    &lt;xsl:for-each select=&quot;//Annotation[local-name(..) != ''Annotation'']&quot;&gt;
    	&lt;xsl:value-of select=&quot;.//Relation/text()&quot;/&gt;
	&lt;xsl:value-of select=&quot;'':''&quot;/&gt;
    	&lt;xsl:for-each select=&quot;./descendant-or-self::Annotation&quot;&gt;
      	    &lt;xsl:value-of select=&quot;./attribute::value&quot;/&gt;
	&lt;xsl:if test=&quot;position( ) != last( )&quot;&gt;&lt;xsl:value-of select=&quot;'',''&quot;/&gt;&lt;/xsl:if&gt;
	&lt;/xsl:for-each&gt;
&lt;xsl:if test=&quot;position( ) != last( )&quot;&gt;&lt;xsl:value-of select=&quot;''|''&quot;/&gt;&lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;');
</entry>

<entry key="GetMapProv">
SELECT trans_prov FROM
(SELECT MAPPROV * FROM ${1} WHERE tid = '${2}') AS mp
</entry>

</properties>